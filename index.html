<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>확장된 최적 인스턴스 계산기</title>
  <style>
    body { font-family: Arial; padding: 20px; text-align: center; }
    input { padding: 10px; margin: 10px; font-size: 16px; width: 100px; }
    button { padding: 10px 20px; font-size: 16px; }
    ul { text-align: left; margin-top: 20px; display: inline-block; }
  </style>
</head>
<body>
  <h1>확장된 최적 인스턴스 계산기</h1>
  <p>속도 가중치와 비용 가중치를 입력하세요 (합은 1)</p>
  <input type="number" id="speedWeight" placeholder="속도 가중치" step="0.01" min="0" max="1" />
  <input type="number" id="costWeight" placeholder="비용 가중치" step="0.01" min="0" max="1" />
  <br>
  <button onclick="calculate()">계산</button>
  <h2>추천 경로</h2>
  <ul id="result"></ul>

  <script>
    const instances = [
      { region: '서울', type: 'c7g', cost: 4 },
      { region: '서울', type: 't2',  cost: 6 },
      { region: '일본', type: 'c7g', cost: 14 },
      { region: '일본', type: 't2',  cost: 16 },
      { region: '미국', type: 'c7g', cost: 8 },
      { region: '미국', type: 't2',  cost: 12 },
    ];

    // 지역 간 속도값 (송신 → 수신)
    const speedMap = {
      '서울-일본': 10,
      '서울-미국': 20,
      '미국-일본': 10,
      '미국-서울': 10,
      '일본-서울': 20,
      '일본-미국': 20
    };

    function calculate() {
      const speedWeight = parseFloat(document.getElementById('speedWeight').value);
      const costWeight = parseFloat(document.getElementById('costWeight').value);
      const resultList = document.getElementById('result');
      resultList.innerHTML = '';

      if (isNaN(speedWeight) || isNaN(costWeight) || (speedWeight + costWeight).toFixed(2) != "1.00") {
        resultList.innerHTML = '<li>가중치의 합이 1이 되도록 입력하세요.</li>';
        return;
      }

      const results = [];

      for (const sender of instances) {
        for (const receiver of instances) {
          if (sender === receiver) continue;

          const speedKey = `${sender.region}-${receiver.region}`;
          const speed = speedMap[speedKey];
          if (speed === undefined) continue;

          const score = (speed * speedWeight) + ((1 / sender.cost) * costWeight);
          const pair = `${sender.region}-${sender.type} → ${receiver.region}-${receiver.type}`;
          results.push({ pair, score });
        }
      }

      results.sort((a, b) => b.score - a.score);

      results.forEach(r => {
        const li = document.createElement('li');
        li.textContent = `${r.pair} (점수: ${r.score.toFixed(3)})`;
        resultList.appendChild(li);
      });
    }
  </script>
</body>
</html>
